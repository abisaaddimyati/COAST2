<?php /************************************************************************************************ * Program History :** Project Name     : OAS* Client Name      : CBI - Muhammad* Program Id       : OAS102* Program Name     : Edit Bantuan Per Level* Description      :* Environment      : PHP 5.4.4* Author           : Winni Oktaviani* Version          : 01.00.00* Creation Date    : 13-02-2015 12:35:00 ICT 2015** Update history     Re-fix date       Person in charge      Description* ** Copyright(C) [..]. All Rights Reserved*************************************************************************************************/?><script type="text/javascript">var htmlobjek;$(document).ready(function(){	$("#bantuan102").change(function(){		var code = $("#bantuan102").val();		var cost_id = "<?= $level_id['LEVEL_ID'] ?>";		ambil_amountBantuan();		$.ajax({			url: "c_oas102/getListKelahiran",			data: {"code":code},			cache: false,			success: function(msg)				{					$("#cb_list_kelahiran").html(msg);					$('#cb_list_kelahiran').show();									if ($('#kelahiran_list').val() != null){					$('#kelahiran_list').show();				}				else{					$('#kelahiran_list').hide();				}												$.ajax({					url: "c_oas102/getAmount",					data: {"code":code,"cost_id":cost_id},					cache: false,					success: function(msg)					{							$("#edit_amount_bantuan").html(msg);						$('#edit_amount_bantuan').show();											}					});			}								});		});				$("#kelahiran_list").change(function(){			ambil_amountBantuan();		});});</script><?$edit = true;?><div class="box box-success">    <div class="box-body">                    <div class="form-group">                <label for="name" class="col-sm-4 control-label">Level</label>                <div class="input-group">                    <div class="input-group-addon">                        <i class="fa fa-user"></i>                    </div>                    <input type="text" readonly maxlength="50" style="text-align: left; width: 175px" value="<?php if($edit) echo $level_id['LEVEL_NAME'] ?>" class="form-control holo">                </div>            </div>						<div class="form-group">				<label class="col-sm-4 control-label">Tipe Bantuan</label>				<div class="input-group">                    <select id="bantuan102">						<option style="display: none;" value=""> --choose one---</option>                        <?php foreach ($list_bantuan as $key => $bantuan) { ?>                        <option value="<?= $bantuan['EXPENSE_TYPE_ID'] ?>"><?= $bantuan['EXPENSE_TYPE_NAME']?></option>                        <?php } ?>                    </select> 					<Span id="cb_list_kelahiran">	</Span>				</div>			</div>				<Span id="edit_cb_kelahiran">	</Span>			<div class="form-group">                <label for="amount_dim" class="col-sm-4 control-label">Amount</label>                <div class="input-group">                    <div class="input-group-addon">                        <i class="fa fa-money"></i>                    </div>					<Span id="edit_amount_bantuan">	</Span>                   </div>            </div>			        </div><!-- /.input-section -->    </div><!-- /.box-body --></div><!-- /.box-success -->      <div class="box-footer clearfix">        <div class="pull-left" id="chg-pwd-msg"></div>        <button class="pull-right btn btn-primary             <?php if(!$edit) echo'disabled';?>" type="submit" id="btn_edit_amount_bantuan">SAVE</button>    </div></div><!-- /.box --><script type="text/javascript">    // variabel untuk disubmit	var level ="<?= $level_id['LEVEL_ID'] ?>"; 	var tipe_bantuan = null;	//untuk format angka nominal amountfunction formatAngka(objek, separator) {  a = objek.value;  b = a.replace(/[^\d]/g,"");  c = "";  panjang = b.length;  j = 0;  for (i = panjang; i > 0; i--) {    j = j + 1;    if (((j % 3) == 1) && (j != 1)) {      c = b.substr(i-1,1) + separator + c;    } else {      c = b.substr(i-1,1) + c;    }  }  objek.value = c;}//function membersihkan tanda titik di field amountfunction bersihPemisah(ini){	a = ini.toString().replace(".","");	//a = a.replace(".","");	return a;}// mengambil amount berdasarkan tipe bantuan		function ambil_amountBantuan(){		if (($('#bantuan102').val() == 9) && ($('#kelahiran_list').val != '')){		var code = $("#bantuan102").val();		var cost_id = "<?= $level_id['LEVEL_ID'] ?>";		var child = $('#kelahiran_list').val();			$.ajax({				url: "c_oas102/getAmount",				data: {"code":code,"child":child,"cost_id":cost_id},				cache: false,				success: function(msg)				{						$("#edit_amount_bantuan").html(msg);					$('#edit_amount_bantuan').show();					tipe_bantuan = $('#kelahiran_list').val();				}				});	}	else{		tipe_bantuan = $('#bantuan102').val();	}}    $(function() {     		        $('#btn_edit_amount_bantuan').on('click', function(){			var form_data = {				level	: level,				tipe	: tipe_bantuan,				amount  :  bersihPemisah(bersihPemisah(bersihPemisah(bersihPemisah($('#helpme').val())))),				ajax	: '1'			}; 			 console.log(form_data);			$.ajax({				url: "c_oas102/update_bantuan",				type: 'POST',				async : false,				data: form_data,				timeout: 1000, //1000ms				success: function(data) {					alert("sukses");					//location.reload();				},				error: function(){                      					alert("gagal");				}			});		});    });</script>