<?php /************************************************************************************************ * Program History :** Project Name     : OAS* Client Name      : CBI - Muhammad* Program Id       : OAS056* Program Name     : Paid  Cash Advance Selected* Description      :* Environment      : PHP 5.4.4* Author           : Winni Oktaviani* Version          : 01.00.00* Creation Date    : 25-11-2014 10:20:00 ICT 2014** Update history     Re-fix date       Person in charge      Description* ** Copyright(C) [..]. All Rights Reserved*************************************************************************************************/if ( ! defined('BASEPATH')) exit('No direct script access allowed');class C_OAS056 extends MY_Controller {	function __construct()	{		parent::__construct();		$index	= $this->config->item('index_page');		$host	= $this->config->item('base_url');		$this->url = empty($index) ? $host : $host . $index . '/';		$this->user	= unserialize(base64_decode($this->session->userdata('user')));		$this->load->model('m_oas056', 'list_ca_model');			}	function _get_post_data()	{		$search['employeeid']		= $this->input->get('employeeid');		$search['employeeGroup']	= $this->user['group']; 		 			$search['employeename']		= $this->input->get('employeename'); 			$search['ca_type']			= $this->input->get('ca_type');  			$search['group_id']			= $this->input->get('PCA_group'); 			$search['division_id']		= $this->input->get('PCA_division'); 			$search['chargecodetype_id']	= $this->input->get('PCA_cctype'); 			$search['chargecode_id']		= $this->input->get('PCA_chargecode'); 			$search['year']					= $this->input->get('PCA_year'); 			$search['month']				= $this->input->get('PCA_month');			$search['PCA_currency']			= $this->input->get('PCA_currency');		 		return $search; 	}	function search()	{		$search				= $this->_get_post_data(); 		$employeeID 		= $this->user['id']; 			$param['this_id']	= $this->user['id']; 		$param['submission_list']	= $this->list_ca_model->get_search_list($employeeID, $search); 				$param['list_group']		= $this->list_ca_model->get_group_list();  		$param['detail_admin']		= $this->_get_employee_admin($employeeID);		$param['detail_akun']		= $this->_get_employee_akun($employeeID);		$param['detail_dir']		= $this->_get_employee_dir($employeeID);		$param['list_cash_advance_type']	= $this->list_ca_model->get_cash_advance_type();		if($search['group_id'] != ''){ 				$param['list_division'] 	= $this->list_ca_model->get_division_list($search['group_id']); 		}  				$param['list_chargecodetype']	= $this->list_ca_model->get_chargecodetype_list(); 		if($search['chargecodetype_id'] != ''){ 				$param['list_chargecode']	= $this->list_ca_model->get_chargecode_list($search['chargecodetype_id']); 		} 		 				$param['search_param'] = $search; 				$param['month_list'] = $this->month_list;	 		$param['employee_list'] = $this->list_ca_model->get_employee_list(); 		$this->load->view('v_oas056', $param); 	}	function load_view()	{		$employeeID					= $this->user['id'];		$param['employeeGroup']		= $this->user['group'];		$param['this_id']			= $this->user['id'];		$param['submission_list']	= $this->list_ca_model->get_list($param);		$param['detail_admin']		= $this->_get_employee_admin($employeeID);		$param['detail_akun'] 		= $this->_get_employee_akun($employeeID);		$param['detail_dir'] 		= $this->_get_employee_dir($employeeID);		$param['list_group']		= $this->list_ca_model->get_group_list();		$param['list_chargecodetype']		= $this->list_ca_model->get_chargecodetype_list();		$param['list_cash_advance_type'] 	= $this->list_ca_model->get_cash_advance_type();		$param['month_list']		= $this->month_list;			$param['employee_list']		= $this->list_ca_model->get_employee_list();				$this->load->view('v_oas056', $param);	}	//function search divisi	function load_division($group_id = '')	{		$out = array();		header('Content-Type: application/x-json; charset=utf-8');		if($group_id != ''){			$division_list = $this->list_model->get_division_list($group_id);			if(isset($division_list)){				$out[''] = '-- All --';				foreach ($division_list as $division) {					$out[$division['id']] = $division['name'];				}			}else{				$out['0'] = '-- Data Not Found --';			}		}		else		{			$out[''] = '-- All --';		}		echo(json_encode($out));	}	//function search chargecode	function load_chargecode($chargecodetype_id = '')	{		$out = array();		header('Content-Type: application/x-json; charset=utf-8');		if($chargecodetype_id != ''){			$chargecode_list = $this->list_ca_model->get_chargecode_list($chargecodetype_id);			if(isset($chargecode_list)){				$out[''] = '-- All --';				foreach ($chargecode_list as $chargecode) {					$out[$chargecode['id']] = $chargecode['name'];				}			}else{				$out['0'] = '-- Data Not Found --';			}		}		else		{			$out[''] = '-- All --';		}		echo(json_encode($out));	}	//function paid	public function paid_selected(){		$update = $this->list_ca_model->paid_selected();		if($update){			header('location:'.base_url().'#');		}	}}/* End of file c_oas056.php *//* Location: ./application/controllers/c_oas056.php */