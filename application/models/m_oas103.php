<?php /************************************************************************************************ * Program History :** Project Name     : OAS* Client Name      : CBI - Muhammad* Program Id       : OAS103* Program Name     : Edit Tunjangan Per Karyawan* Description      :* Environment      : PHP 5.4.4* Author           : Winni Oktaviani* Version          : 01.00.00* Creation Date    : 13-02-2015 12:35:00 ICT 2015** Update history     Re-fix date       Person in charge      Description* ** Copyright(C) [..]. All Rights Reserved*************************************************************************************************/if (!defined('BASEPATH')) {exit('No direct script access allowed');}class M_OAS103 extends CI_Model {		function __construct() {		parent::__construct();		$this->user	= unserialize(base64_decode($this->session->userdata('user')));	}		function get_employee($Id)	{		$sql = " SELECT							emp.*				FROM							tb_m_employee emp  				WHERE							emp.EMPLOYEE_ID = '$Id' ";		return fetchArray($sql, 'row');	}		//fungsi untuk update data tunjangan 	function updateTunjangan($data)	{		$ack = 0;				$sql = "UPDATE						tb_m_employee				SET							EXPENSE_CLAIM_MEDICAL_ENTITLEMENT = '$data[MEDIS]',							EXPENSE_CLAIM_TRANSPORTATION_ENTITLEMENT  ='$data[TRANSPORT]',							EXPENSE_CLAIM_TELECOMMUNICATION_ENTITLEMENT  =  '$data[TELKOM]',							UPDATED_BY = 'user: $data[this_user]',							UPDATED_DT = '".date("Y-m-d H:i:s")."'				WHERE						EMPLOYEE_ID = '$data[EMPLOYEE_ID]' ";			$sql_periode = "UPDATE						tb_m_employee				SET														PERIODE_MEDICAL_CLAIM  ='$data[PERIODE]',							UPDATED_BY = 'user: $data[this_user]',							UPDATED_DT = '".date("Y-m-d H:i:s")."'				WHERE						EMPLOYEE_ID = '$data[EMPLOYEE_ID]'";										$this->db->trans_start();			$this->db->query($sql);			$this->db->query($sql_periode);					if($this->db->trans_complete())		{			$ack = 1;		}		return $ack;	}	}