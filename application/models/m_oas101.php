<?php /************************************************************************************************ * Program History :** Project Name     : OAS* Client Name      : CBI - Muhammad* Program Id       : OAS101* Program Name     : Pengaturan Bantuan * Description      :* Environment      : PHP 5.4.4* Author           : Winni Oktaviani* Version          : 01.00.00* Creation Date    : 13-02-2015 09:33:00 ICT 2015** Update history     Re-fix date       Person in charge      Description* ** Copyright(C) [..]. All Rights Reserved*************************************************************************************************/if (!defined('BASEPATH')) {exit('No direct script access allowed');}class M_OAS101 extends CI_Model {		function __construct() {		parent::__construct();		$this->user	= unserialize(base64_decode($this->session->userdata('user')));	}		function get_amount_list($level = '')	{		$sql = " SELECT bnt.LEVEL_ID id ,						lvl.LEVEL_NAME level_name,						pernikahan.AMOUNT nikah,						kacamata.AMOUNT mata,						caesar.AMOUNT kCaesar,						normal.AMOUNT kNormal,						gugur.AMOUNT keguguran 				FROM tb_m_position_level lvl,					tb_m_bantuan bnt inner join (select * from tb_m_bantuan where EXPENSE_TYPE_ID = '10' ORDER BY LEVEL_ID ASC) kacamata 					inner join (select * from tb_m_bantuan where EXPENSE_TYPE_ID = '8' ORDER BY LEVEL_ID ASC) pernikahan					inner join (select * from tb_m_bantuan where EXPENSE_TYPE_ID = '9001' ORDER BY LEVEL_ID ASC) normal					inner join (select * from tb_m_bantuan where EXPENSE_TYPE_ID = '9002' ORDER BY LEVEL_ID ASC) caesar					inner join (select * from tb_m_bantuan where EXPENSE_TYPE_ID = '9003' ORDER BY LEVEL_ID ASC) gugur 				WHERE 					bnt.LEVEL_ID = pernikahan.LEVEL_ID AND					bnt.LEVEL_ID = kacamata.LEVEL_ID AND					bnt.LEVEL_ID = caesar.LEVEL_ID AND					bnt.LEVEL_ID = normal.LEVEL_ID AND					bnt.LEVEL_ID = gugur.LEVEL_ID AND					bnt.LEVEL_ID = lvl.LEVEL_ID                ";				if($level != ''){			$sql .= " AND lvl.LEVEL_ID = '$level' ";					}			$sql .= "GROUP BY lvl.LEVEL_ID ASC";		return fetchArray($sql, 'all');	}		function get_level_list()	{		$sql = " SELECT					LEVEL_ID id,					LEVEL_NAME name				FROM					tb_m_position_level				ORDER BY LEVEL_ID ASC ";		return fetchArray($sql, 'all');	}	}