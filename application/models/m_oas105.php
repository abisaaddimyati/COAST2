<?php /************************************************************************************************ * Program History :** Project Name     : OAS* Client Name      : CBI - Muhammad* Program Id       : OAS105* Program Name     : Data Bantuan Per Karyawan* Description      :* Environment      : PHP 5.4.4* Author           : Winni Oktaviani* Version          : 01.00.00* Creation Date    : 23-02-2015 10:05:00 ICT 2015** Update history     Re-fix date       Person in charge      Description* ** Copyright(C) [..]. All Rights Reserved*************************************************************************************************/if (!defined('BASEPATH')) {exit('No direct script access allowed');}class M_OAS105 extends CI_Model {		function __construct() {		parent::__construct();		$this->user	= unserialize(base64_decode($this->session->userdata('user')));	}		function get_employee_list($employee_id = '')	{		$sql = "SELECT bnt.EMPLOYEE_ID id ,						empl.EMPLOYEE_NAME name,						pernikahan.AMOUNT nikah,						kacamata.AMOUNT mata,						caesar.AMOUNT kCaesar,						normal.AMOUNT kNormal,						gugur.AMOUNT keguguran 				FROM tb_m_employee empl,					tb_r_bantuan bnt inner join (select * from tb_r_bantuan where EXPENSE_TYPE_ID = '10' ORDER BY EMPLOYEE_ID ASC) kacamata 					inner join (select * from tb_r_bantuan where EXPENSE_TYPE_ID = '8' ORDER BY EMPLOYEE_ID ASC) pernikahan					inner join (select * from tb_r_bantuan where EXPENSE_TYPE_ID = '9001' ORDER BY EMPLOYEE_ID ASC) caesar					inner join (select * from tb_r_bantuan where EXPENSE_TYPE_ID = '9002' ORDER BY EMPLOYEE_ID ASC) normal					inner join (select * from tb_r_bantuan where EXPENSE_TYPE_ID = '9003' ORDER BY EMPLOYEE_ID ASC) gugur 				WHERE 					bnt.EMPLOYEE_ID = pernikahan.EMPLOYEE_ID AND					bnt.EMPLOYEE_ID = kacamata.EMPLOYEE_ID AND					bnt.EMPLOYEE_ID = caesar.EMPLOYEE_ID AND					bnt.EMPLOYEE_ID = normal.EMPLOYEE_ID AND					bnt.EMPLOYEE_ID = gugur.EMPLOYEE_ID AND					bnt.EMPLOYEE_ID = empl.EMPLOYEE_ID AND 					empl.STATUS = 1";			if($employee_id != ''){				$sql .= " AND empl.EMPLOYEE_ID = '$employee_id' ";			}			$sql.="	GROUP BY bnt.EMPLOYEE_ID";		return fetchArray($sql, 'all');	}		function get_user() 	{		$sql = " SELECT							EMPLOYEE_ID id,							EMPLOYEE_NAME name											FROM							tb_m_employee empl 				ORDER BY EMPLOYEE_NAME ASC ";		return fetchArray($sql, 'all');	}			}